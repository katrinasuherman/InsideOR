<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Surgical Outcome Explorer</title>
  <link rel="stylesheet" href="style.css" />
  <script type="module" src="main.js" defer></script>
</head>
<body>
  <main class="scroll-container">

    <!-- HERO SECTION -->
    <section class="hero-section scroll-section">
      <div class="hero-text">
        <h1>Inside the</h1> 
        <h1>
          <span class="highlight">Operating Room</span><br />
          <span class="subhead">What Affects Surgery Time and Recovery?</span>
        </h1>
        <p class="lead">
          Explore 6,388 real-world surgeries from the VitalDB dataset to uncover
          how age, BMI, approach, and diagnosis influence surgical outcomes.
        </p>
        <div class="hero-buttons">
          <a href="#intro" class="btn primary">Start Exploring</a>
          <a href="https://vitaldb.net/dataset/" class="btn outline" target="_blank" rel="noopener noreferrer">Data</a>
        </div>
      </div>
      <div class="hero-image">
        <img src="images/gif2.gif" alt="Operating room illustration" />
      </div>
    </section>

    <!-- INTRO TEXT SECTION -->
    <section class="intro-box scroll-section" id="intro">
      <div class="intro-content">
        <p class="reveal" id="line1">
          What happens inside the <span class="highlight-blue">operating room</span>?
        </p>        
        <p id="line2" class="reveal hidden">
          Select from <span class="highlight-red">20 surgical cases</span> and step into the OR with us.
        </p>
        <div id="case-selector" style="display: none;">
          <label for="caseDropdown">Choose a case:</label>
          <select id="caseDropdown"></select>
        </div>
      </div>
    </section>

    <!-- CASE EXPLORER SECTION -->
    <section class="case-explorer scroll-section" id="case-explorer">    
      <div class="layout-wrapper">
        <div id="case-and-body">
          <div id="case-section">
            <div id="ekg-monitor">
              <img id="ekg-monitor" src="images/ekg.png" alt="ekg" />
            </div>
    
            <div id="or-container">
              <div class="zoom-area">
                <img id="or-image" src="images/table-female.png" alt="Patient in OR" />
              </div>
              <div id="tooltip" class="tooltip"></div>
            </div>
    
            <div id="surgeryInfo" class="info-card">
              Surgical Information here.
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- VITAL CHART + INTERVENTION SECTION -->
<section class="vitals-section scroll-section" id="vitals-section">
  <div id="container">
    <div id="ekg-border">
      <div id="charts-wrapper">

        <div id="upper-controls">
          <input type="range" id="time-slider" min="0" max="0" step="1" value="0" />
        </div>

        <div id="vital-chart"></div>
        <div id="intervention-chart"></div>
      </div>

      <div id="sidebar">
        <button id="play-btn">‚ñ∂Ô∏è Play</button>
        <button id="pause-btn" disabled>‚è∏ Pause</button>

        <div id="legend"></div>
        <div id="live-values"></div>
      </div>
    </div>
  </div>
</section>


    <!-- SCATTER PLOT EXPLORER SECTION -->
    <section class="scatter-section">
      <!-- LEFT COLUMN: SCROLLABLE TEXT -->
      <div class="scatter-text">
        <section class="instructions">
          <h3>üß≠ How to Use the Surgical Outcome Explorer</h3>
          <ol>
            <li><strong>Choose an Operation Type:</strong> Select a type (e.g., Colorectal, Stomach) to filter surgeries.</li>
            <li><strong>Filter by Sex:</strong> Use ‚ôÇÔ∏è / ‚ôÄÔ∏è toggles to include or exclude patients by sex.</li>
            <li><strong>Select Axes:</strong> Use dropdowns to change the X-axis and Y-axis (e.g., BMI vs. ICU days).</li>
            <li><strong>Toggle Emergency Cases:</strong> Use the switch to focus on emergency-only surgeries.</li>
            <li><strong>Interpret the Results:</strong> View patterns in the chart and check summary stats below.</li>
          </ol>
        </section>
      </div>
    
      <!-- RIGHT COLUMN: FIXED VISUALIZATION -->
      <div class="vis-panel">
        <section id="controls">
          <h3>Operation types:</h1>
          <div class="optype-filter">
            <label class="optype-pill"><input type="radio" name="optype" value="All" checked /> All</label>
            <label class="optype-pill"><input type="radio" name="optype" value="Colorectal" /> Colorectal</label>
            <label class="optype-pill"><input type="radio" name="optype" value="Stomach" /> Stomach</label>
            <label class="optype-pill"><input type="radio" name="optype" value="Biliary/Pancreas" /> Biliary/Pancreas</label>
            <label class="optype-pill"><input type="radio" name="optype" value="Vascular" /> Vascular</label>
            <label class="optype-pill"><input type="radio" name="optype" value="Major resection" /> Major resection</label>
            <label class="optype-pill"><input type="radio" name="optype" value="Breast" /> Breast</label>
            <label class="optype-pill"><input type="radio" name="optype" value="Minor resection" /> Minor resection</label>
            <label class="optype-pill"><input type="radio" name="optype" value="Transplantation" /> Transplantation</label>
            <label class="optype-pill"><input type="radio" name="optype" value="Hepatic" /> Hepatic</label>
            <label class="optype-pill"><input type="radio" name="optype" value="Thyroid" /> Thyroid</label>
            <label class="optype-pill"><input type="radio" name="optype" value="Others" /> Others</label>
          </div>
    
          <div class="filter-card">
            <div class="sex-toggle">
              <span>Sex:</span>
              <label class="icon-toggle">
                <input type="checkbox" id="showMale" class="male" checked />
                <span class="icon">‚ôÇÔ∏è</span>
              </label>
              <label class="icon-toggle">
                <input type="checkbox" id="showFemale" class="female" checked />
                <span class="icon">‚ôÄÔ∏è</span>
              </label>
            </div>
    
            <div class="axis-selects">
              <label for="xQuantSelect">X-axis:
                <select id="xQuantSelect">
                  <option value="age">Age</option>
                  <option value="height">Height</option>
                  <option value="weight">Weight</option>
                  <option value="bmi">BMI</option>
                  <option value="asa">ASA Score</option>
                </select>
              </label>
    
              <label for="ySelect">Y-axis:
                <select id="ySelect">
                  <option value="surgery_time">Surgery Time</option>
                  <option value="icu_days">ICU Days</option>
                </select>
              </label>
            </div>
          </div>
        </section>
    
        <div class="toggle-container">
          <label class="switch">
            <input type="checkbox" id="emergencyToggle">
            <span class="slider"></span>
          </label>
          <label for="emergencyToggle">Show only emergency operations</label>
        </div>
    
        <section id="stats">
          <strong id="summary">No data loaded.</strong>
        </section>
    
        <svg id="chart" width="700" height="400"></svg>
      </div>
    </section>
    
  </main>
</body>
</html>
